(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[521],{61479:function(e,t,n){Promise.resolve().then(n.bind(n,18137))},16463:function(e,t,n){"use strict";var s=n(71169);n.o(s,"usePathname")&&n.d(t,{usePathname:function(){return s.usePathname}}),n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}})},18137:function(e,t,n){"use strict";n.d(t,{IssuesPage:function(){return u}});var s=n(57437),r=n(2265),i=n(48722),o=n(16463),a=n(92800),l=n(37844);let c=[{label:"All",value:"All"},{label:"Open",value:"Open"},{label:"In Progress",value:"In Progress"},{label:"Resolved",value:"Resolved"},{label:"Closed",value:"Closed"}];function u(){var e;let[t,n]=(0,r.useState)("All"),u=(0,o.useRouter)(),{data:y,isLoading:j,error:g}=(0,i.ZP)(["issues",t],()=>(0,a._7)("All"===t?void 0:t)),m=null!==(e=null==y?void 0:y.items)&&void 0!==e?e:[];return(0,s.jsxs)("main",{style:p,children:[(0,s.jsxs)("header",{style:h,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{style:{margin:0},children:"Issues"}),(0,s.jsx)("p",{style:{margin:0,color:"var(--text-muted)"},children:"Consolidated view of outstanding and resolved issues across every application."})]}),(0,s.jsx)("nav",{style:f,"aria-label":"Issue status filter",children:c.map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>n(e.value),style:{...x,background:t===e.value?"var(--primary)":"transparent",color:t===e.value?"#fff":"var(--text)",borderColor:t===e.value?"var(--primary)":"var(--border)"},children:e.label},e.value))})]}),j&&(0,s.jsx)("p",{style:v,children:"Loading issues…"}),g&&(0,s.jsx)("p",{style:{...v,color:"var(--danger)"},children:"Failed to load issues."}),!j&&!g&&0===m.length&&(0,s.jsx)("p",{style:v,children:"No issues recorded."}),m.length>0&&(0,s.jsx)("section",{className:"status-table-wrapper",children:(0,s.jsx)("div",{className:"status-table-scroll",children:(0,s.jsxs)("table",{className:"status-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",children:"#"}),(0,s.jsx)("th",{scope:"col",children:"Issue"}),(0,s.jsx)("th",{scope:"col",children:"Project"}),(0,s.jsx)("th",{scope:"col",children:"PP Ref"}),(0,s.jsx)("th",{scope:"col",children:"Status"}),(0,s.jsx)("th",{scope:"col",children:"Raised"}),(0,s.jsx)("th",{scope:"col",children:"Due"}),(0,s.jsx)("th",{scope:"col",children:"Assigned"})]})}),(0,s.jsx)("tbody",{children:m.map((e,t)=>{var n,r,i;return(0,s.jsxs)("tr",{onClick:()=>u.push((0,l.C)(e.applicationId)),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),u.push((0,l.C)(e.applicationId)))},tabIndex:0,children:[(0,s.jsx)("td",{className:"status-table__cell--index",children:t+1}),(0,s.jsx)("td",{title:e.title,children:(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[(0,s.jsx)("span",{style:{fontWeight:600},children:e.title}),(0,s.jsx)("span",{style:{fontSize:12,color:"var(--text-muted)"},children:e.category})]})}),(0,s.jsx)("td",{title:null!==(n=e.prjCodeName)&&void 0!==n?n:"—",children:null!==(r=e.prjCodeName)&&void 0!==r?r:"—"}),(0,s.jsx)("td",{title:e.ppReference,children:e.ppReference}),(0,s.jsx)("td",{children:e.status}),(0,s.jsx)("td",{children:d(e.dateRaised)}),(0,s.jsx)("td",{children:d(e.dueDate)}),(0,s.jsx)("td",{children:null!==(i=e.assignedTo)&&void 0!==i?i:"—"})]},e.issueId)})})]})})})]})}function d(e){if(!e)return"—";let t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleDateString()}let p={maxWidth:1024,margin:"0 auto",padding:"32px 24px 64px",display:"flex",flexDirection:"column",gap:24},h={display:"flex",flexDirection:"column",gap:16},f={display:"flex",gap:12,flexWrap:"wrap"},x={borderRadius:999,border:"1px solid var(--border)",padding:"8px 14px",fontWeight:600,cursor:"pointer",background:"transparent"},v={padding:48,textAlign:"center",color:"var(--text-muted)"}},421:function(e,t,n){"use strict";n.d(t,{Z:function(){return d},q:function(){return u}});var s=n(4896);let r="eu-west-2",i="eu-west-2_Mp5QuBMEE",o="7p4cb8l4k8g9s2e9infoqoc6id",a="eu-west-2:76467ba5-5dcb-45e3-b2e9-91838ab508cd",l="https://hv16oj3j92.execute-api.eu-west-2.amazonaws.com/prod",c=!!(r&&i&&o&&a&&l);c&&s.V.configure({Auth:{Cognito:{userPoolId:i,userPoolClientId:o,identityPoolId:a,loginWith:{username:!1,email:!0,phone:!1}}},API:{REST:{PlanningTrackerApi:{endpoint:l,region:r}}}});let u=c,d=!1},92800:function(e,t,n){"use strict";n.d(t,{L8:function(){return a},UM:function(){return c},VG:function(){return d},W3:function(){return l},_7:function(){return h},ko:function(){return f},li:function(){return p},v:function(){return u}});var s=n(13280),r=n(421);async function i(){if(r.Z||!r.q)return{};try{var e,t;let n=await (0,s.y)(),r=null===(t=n.tokens)||void 0===t?void 0:null===(e=t.idToken)||void 0===e?void 0:e.toString();if(r)return{Authorization:"Bearer ".concat(r)}}catch(e){console.warn("Failed to fetch auth session",e)}return{}}async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Headers(t.headers);n.set("Content-Type","application/json"),Object.entries(await i()).forEach(e=>{let[t,s]=e;return n.set(t,s)});let s=await fetch("".concat("https://hv16oj3j92.execute-api.eu-west-2.amazonaws.com/prod").concat(e),{...t,headers:n});if(!s.ok)throw Error(await s.text()||"API request failed");if(204!==s.status)return s.json()}async function a(e){return o("/applications?status=".concat(encodeURIComponent(e)))}async function l(e){return o("/applications",{method:"POST",body:JSON.stringify(e)})}async function c(e){return o("/applications/".concat(e))}async function u(e,t){return o("/applications/".concat(e,"/issues"),{method:"POST",body:JSON.stringify(t)})}async function d(e,t,n){return o("/applications/".concat(e,"/issues/").concat(t),{method:"PATCH",body:JSON.stringify(n)})}async function p(e,t){return o("/applications/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async function h(e){let t=e?"?status=".concat(encodeURIComponent(e)):"";return o("/issues".concat(t))}async function f(e,t){return o("/applications/".concat(e,"/extensions"),{method:"POST",body:JSON.stringify(t)})}},37844:function(e,t,n){"use strict";function s(e){return"/applications/".concat(e)}n.d(t,{C:function(){return s}})}},function(e){e.O(0,[844,722,971,23,744],function(){return e(e.s=61479)}),_N_E=e.O()}]);