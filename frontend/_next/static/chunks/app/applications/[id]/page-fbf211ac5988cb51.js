(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[597],{79594:function(e,t,n){Promise.resolve().then(n.bind(n,1573))},16463:function(e,t,n){"use strict";var i=n(71169);n.o(i,"usePathname")&&n.d(t,{usePathname:function(){return i.usePathname}}),n.o(i,"useRouter")&&n.d(t,{useRouter:function(){return i.useRouter}})},1573:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return $}});var i=n(57437),l=n(16463),a=n(2265),s=n(87648),r=n(98089),o=n(92562),d=n(48722),c=n(92800);let u=["Submitted","Invalidated","Live","Determined"],p=["Validation","Technical","Design","Documentation","Other"],x={title:"",category:"Validation",description:"",dueDate:"",assignedTo:"",raisedBy:"",dateRaised:new Date().toISOString().slice(0,10)},f={requestedDate:"",agreedDate:"",notes:""},h=["Approved","Refused","Withdrawn","Pending","NotApplicable"];function y(e){var t,n,l,y,X,$,ee,et,en,ei,el,ea,es,er,eo,ed;let{applicationId:ec,onClose:eu}=e,{mutate:ep}=(0,o.kY)(),{data:ex,error:ef,isLoading:eh,mutate:ey}=(0,d.ZP)(["application",ec],()=>(0,c.UM)(ec)),[eg,ev]=(0,a.useState)(x),[em,ej]=(0,a.useState)(null),[eb,eD]=(0,a.useState)(null),[eC,ew]=(0,a.useState)(f),[eS,eR]=(0,a.useState)(null),[eP,ek]=(0,a.useState)(null),[eO,eI]=(0,a.useState)(null),[eE,eT]=(0,a.useState)(!1);async function eN(e){if(e.preventDefault(),ex){ej(null);try{await (0,c.v)(ex.application.applicationId,{...eg,ppReference:ex.application.ppReference,lpaReference:ex.application.lpaReference}),ev(x),await ey(),await eW()}catch(e){ej(e instanceof Error?e.message:"Failed to create issue")}}}async function eq(e){let t=window.prompt("Provide resolution notes");if(t)try{await (0,c.VG)(ec,e,{status:"Resolved",resolutionNotes:t,dateResolved:new Date().toISOString().slice(0,10)}),await ey(),await eW()}catch(e){alert(e instanceof Error?e.message:"Failed to resolve issue")}}async function ez(e){if(!ex)return;eD(null);let t={status:e};if("Live"!==e||ex.application.validationDate||(t.validationDate=new Date().toISOString().slice(0,10)),"Determined"===e){let e=window.prompt("Decision outcome (Approved / Refused / Withdrawn / Pending)"),n=window.prompt("Determination date (YYYY-MM-DD)",new Date().toISOString().slice(0,10));if(!e||!n)return;t.outcome=e,t.determinationDate=n}try{await (0,c.li)(ec,t),await ey(),await eW(),eD("Updated status to ".concat(e))}catch(e){eD(e instanceof Error?e.message:"Failed to update status")}}async function eA(e){if(e.preventDefault(),ex&&"Live"===ex.application.status){eR(null);try{if(!eC.agreedDate)throw Error("Agreed date is required");await (0,c.ko)(ec,{agreedDate:eC.agreedDate,requestedDate:eC.requestedDate||void 0,notes:eC.notes||void 0}),ew(f),await ey(),await eW()}catch(e){eR(e instanceof Error?e.message:"Failed to record extension")}}}async function eW(){let e=u.map(e=>ep(["applications",e])),t=ep(e=>Array.isArray(e)&&"issues"===e[0]),n=ep(["application",ec]);await Promise.all([...e,t,n])}(0,a.useEffect)(()=>{ek(null)},[ec]);let eU=null!==eP;function eL(e,t){ek(n=>n?{...n,[e]:t}:n)}function eM(){ek(null),eI(null),eT(!1)}async function eF(){if(ex&&eP){eT(!0),eI(null);try{let e={},t=ex.application,n=function(n,i){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=eP[n],s="function"==typeof i?i(null!=a?a:""):a,r="string"==typeof s?s.trim():s;if(l&&!r)throw Error("Please fill all required fields before saving.");let o=t[n],d="string"==typeof o?null==o?void 0:o.toString():o,c=""===r?"":r;(null!=c?c:null)!==(null!=d?d:null)&&(e[n]=""===r?null:r)};if(n("prjCodeName",void 0,!0),n("ppReference",void 0,!0),n("lpaReference"),n("description",void 0,!0),n("council",void 0,!0),n("submissionDate",void 0,!0),n("validationDate"),n("determinationDate"),n("outcome"),n("caseOfficer"),n("caseOfficerEmail"),n("planningPortalUrl"),n("notes"),0===Object.keys(e).length){eM();return}await (0,c.li)(ec,e),await ey(),await eW(),eM()}catch(e){eI(e instanceof Error?e.message:"Failed to save changes")}finally{eT(!1)}}}let eH=(0,a.useMemo)(()=>{if(!ex||!ex.timeline||0===ex.timeline.length)return[];let e=[...ex.timeline].sort((e,t)=>e.timestamp.localeCompare(t.timestamp)),t=e.map((t,n)=>{let i=new Date(t.timestamp),l=e[n+1],a=l?new Date(l.timestamp):new Date,r=(0,s.w)(a,i),o=Number.isFinite(r)&&r>0?r:1;return{...t,startDate:i,endDate:a,duration:o}}),n=t.reduce((e,t)=>e+t.duration,0)||t.length;return t.map(e=>({...e,widthPercent:Math.max(e.duration/n*100,12)}))},[null==ex?void 0:ex.timeline]);if(eh)return(0,i.jsx)("div",{style:m,children:(0,i.jsx)("p",{children:"Loading application…"})});if(ef||!ex)return(0,i.jsxs)("div",{style:m,children:[(0,i.jsx)("p",{style:{color:"var(--danger)"},children:"Unable to load application"}),eu&&(0,i.jsx)("button",{type:"button",style:N,onClick:eu,children:"Close"})]});let e_=null!==(t=ex.extensions)&&void 0!==t?t:[],eB="Live"===ex.application.status;return(0,i.jsxs)("div",{style:m,children:[(0,i.jsxs)("header",{style:j,children:[(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,i.jsx)("span",{style:O,children:ex.application.ppReference}),(0,i.jsx)("h2",{style:{margin:0},children:ex.application.prjCodeName}),(0,i.jsx)("p",{style:{margin:"4px 0",color:"var(--text-muted)"},children:ex.application.description})]}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:12},children:[(0,i.jsx)("div",{style:b(g(ex.application.status)),children:ex.application.status}),eu&&(0,i.jsx)("button",{type:"button",style:N,onClick:eu,children:"Close"})]})]}),(0,i.jsxs)("section",{style:D,children:[(0,i.jsxs)("div",{style:w,children:[(0,i.jsx)("h3",{style:C,children:"Key Details"}),eU?(0,i.jsxs)("div",{style:S,children:[(0,i.jsx)("button",{type:"button",style:N,onClick:eM,disabled:eE,children:"Cancel"}),(0,i.jsx)("button",{type:"button",style:T,onClick:eF,disabled:eE,children:eE?"Saving…":"Save"})]}):(0,i.jsx)("button",{type:"button",style:T,onClick:function(){var e,t,n,i,l,a,s;ex&&(eI(null),ek({prjCodeName:ex.application.prjCodeName,ppReference:ex.application.ppReference,lpaReference:ex.application.lpaReference,description:ex.application.description,council:ex.application.council,submissionDate:ex.application.submissionDate,validationDate:null!==(e=ex.application.validationDate)&&void 0!==e?e:"",determinationDate:null!==(t=ex.application.determinationDate)&&void 0!==t?t:"",outcome:null!==(n=ex.application.outcome)&&void 0!==n?n:"Pending",caseOfficer:null!==(i=ex.application.caseOfficer)&&void 0!==i?i:"",caseOfficerEmail:null!==(l=ex.application.caseOfficerEmail)&&void 0!==l?l:"",planningPortalUrl:null!==(a=ex.application.planningPortalUrl)&&void 0!==a?a:"",notes:null!==(s=ex.application.notes)&&void 0!==s?s:""}))},children:"Edit Details"})]}),eO&&(0,i.jsx)("p",{style:{color:"var(--danger)",fontSize:13},children:eO}),eU?(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),eF()},style:R,children:[(0,i.jsxs)("div",{style:P,children:[(0,i.jsxs)("label",{style:M,children:["Project Code & Name",(0,i.jsx)("input",{required:!0,value:null!==(n=null==eP?void 0:eP.prjCodeName)&&void 0!==n?n:"",onChange:e=>eL("prjCodeName",e.target.value),style:F})]}),(0,i.jsxs)("label",{style:M,children:["PP Reference",(0,i.jsx)("input",{required:!0,value:null!==(l=null==eP?void 0:eP.ppReference)&&void 0!==l?l:"",onChange:e=>eL("ppReference",e.target.value),style:F})]}),(0,i.jsxs)("label",{style:M,children:["LPA Reference",(0,i.jsx)("input",{value:null!==(y=null==eP?void 0:eP.lpaReference)&&void 0!==y?y:"",onChange:e=>eL("lpaReference",e.target.value),style:F})]}),(0,i.jsxs)("label",{style:M,children:["Council",(0,i.jsx)("input",{required:!0,value:null!==(X=null==eP?void 0:eP.council)&&void 0!==X?X:"",onChange:e=>eL("council",e.target.value),style:F})]}),(0,i.jsxs)("label",{style:M,children:["Submission Date",(0,i.jsx)("input",{required:!0,type:"date",value:null!==($=null==eP?void 0:eP.submissionDate)&&void 0!==$?$:"",onChange:e=>eL("submissionDate",e.target.value),style:F})]}),(0,i.jsxs)("label",{style:M,children:["Validation Date",(0,i.jsx)("input",{type:"date",value:null!==(ee=null==eP?void 0:eP.validationDate)&&void 0!==ee?ee:"",onChange:e=>eL("validationDate",e.target.value),style:F})]}),(0,i.jsxs)("label",{style:M,children:["Determination Date",(0,i.jsx)("input",{type:"date",value:null!==(et=null==eP?void 0:eP.determinationDate)&&void 0!==et?et:"",onChange:e=>eL("determinationDate",e.target.value),style:F})]}),(0,i.jsxs)("label",{style:M,children:["Outcome",(0,i.jsx)("select",{value:null!==(en=null==eP?void 0:eP.outcome)&&void 0!==en?en:"Pending",onChange:e=>eL("outcome",e.target.value),style:F,children:h.map(e=>(0,i.jsx)("option",{value:e,children:e},e))})]}),(0,i.jsxs)("label",{style:M,children:["Case Officer",(0,i.jsx)("input",{value:null!==(ei=null==eP?void 0:eP.caseOfficer)&&void 0!==ei?ei:"",onChange:e=>eL("caseOfficer",e.target.value),style:F})]}),(0,i.jsxs)("label",{style:M,children:["Case Officer Email",(0,i.jsx)("input",{type:"email",value:null!==(el=null==eP?void 0:eP.caseOfficerEmail)&&void 0!==el?el:"",onChange:e=>eL("caseOfficerEmail",e.target.value),style:F})]}),(0,i.jsxs)("label",{style:M,children:["Planning Portal URL",(0,i.jsx)("input",{value:null!==(ea=null==eP?void 0:eP.planningPortalUrl)&&void 0!==ea?ea:"",onChange:e=>eL("planningPortalUrl",e.target.value),style:F})]})]}),(0,i.jsxs)("label",{style:M,children:["Description",(0,i.jsx)("textarea",{required:!0,value:null!==(es=null==eP?void 0:eP.description)&&void 0!==es?es:"",onChange:e=>eL("description",e.target.value),style:{...F,minHeight:120}})]}),(0,i.jsxs)("label",{style:M,children:["Notes",(0,i.jsx)("textarea",{value:null!==(er=null==eP?void 0:eP.notes)&&void 0!==er?er:"",onChange:e=>eL("notes",e.target.value),style:{...F,minHeight:80}})]}),(0,i.jsxs)("div",{style:k,children:[(0,i.jsx)("button",{type:"button",style:N,onClick:eM,disabled:eE,children:"Cancel"}),(0,i.jsx)("button",{type:"submit",style:T,disabled:eE,children:eE?"Saving…":"Save Changes"})]})]}):(0,i.jsxs)("dl",{style:I,children:[(0,i.jsx)("dt",{children:"PP Reference"}),(0,i.jsx)("dd",{children:ex.application.ppReference}),(0,i.jsx)("dt",{children:"LPA Reference"}),(0,i.jsx)("dd",{children:null!==(eo=ex.application.lpaReference)&&void 0!==eo?eo:"—"}),(0,i.jsx)("dt",{children:"Council"}),(0,i.jsx)("dd",{children:ex.application.council}),(0,i.jsx)("dt",{children:"Planning Portal"}),(0,i.jsx)("dd",{children:ex.application.planningPortalUrl?(0,i.jsx)("a",{href:ex.application.planningPortalUrl,target:"_blank",rel:"noopener noreferrer",children:ex.application.planningPortalUrl}):(0,i.jsx)("span",{style:{color:"var(--text-muted)"},children:"Not set"})}),(0,i.jsx)("dt",{children:"Submission Date"}),(0,i.jsx)("dd",{children:v(ex.application.submissionDate)}),(0,i.jsx)("dt",{children:"Validation Date"}),(0,i.jsx)("dd",{children:v(ex.application.validationDate)}),(0,i.jsx)("dt",{children:"Determination Date"}),(0,i.jsx)("dd",{children:v(ex.application.determinationDate)}),(0,i.jsx)("dt",{children:"EOT"}),(0,i.jsx)("dd",{children:v(ex.application.eotDate)}),(0,i.jsx)("dt",{children:"Outcome"}),(0,i.jsx)("dd",{children:null!==(ed=ex.application.outcome)&&void 0!==ed?ed:"—"}),(0,i.jsx)("dt",{children:"Case Officer"}),(0,i.jsx)("dd",{children:ex.application.caseOfficer?ex.application.caseOfficerEmail?(0,i.jsx)("a",{href:"mailto:".concat(ex.application.caseOfficerEmail),children:ex.application.caseOfficer}):ex.application.caseOfficer:"—"}),ex.application.notes&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("dt",{children:"Notes"}),(0,i.jsx)("dd",{children:ex.application.notes})]})]})]}),(0,i.jsxs)("section",{style:D,children:[(0,i.jsx)("h3",{style:C,children:"Extensions of Time"}),"Live"!==ex.application.status&&(0,i.jsx)("p",{style:{color:"var(--text-muted)",fontSize:12},children:"Extensions can only be added while the application is Live."}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[0===e_.length&&(0,i.jsx)("p",{style:{color:"var(--text-muted)"},children:"No extensions recorded."}),e_.map(e=>(0,i.jsxs)("div",{style:Q,children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)("span",{style:{fontWeight:600},children:v(e.agreedDate)}),e.requestedDate&&(0,i.jsxs)("span",{style:{fontSize:12,color:"var(--text-muted)"},children:["Requested ",v(e.requestedDate)]})]}),e.notes&&(0,i.jsx)("p",{style:{margin:"4px 0 0",fontSize:13},children:e.notes})]},e.extensionId))]}),(0,i.jsxs)("form",{onSubmit:eA,style:L,children:[(0,i.jsx)("h4",{style:{margin:"0 0 8px"},children:"Log Extension"}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:12},children:[(0,i.jsxs)("label",{style:M,children:["Requested Date",(0,i.jsx)("input",{type:"date",value:eC.requestedDate,onChange:e=>ew(t=>({...t,requestedDate:e.target.value})),style:F,disabled:!eB})]}),(0,i.jsxs)("label",{style:M,children:["Agreed Date",(0,i.jsx)("input",{required:!0,type:"date",value:eC.agreedDate,onChange:e=>ew(t=>({...t,agreedDate:e.target.value})),style:F,disabled:!eB})]})]}),(0,i.jsxs)("label",{style:M,children:["Notes",(0,i.jsx)("textarea",{value:eC.notes,onChange:e=>ew(t=>({...t,notes:e.target.value})),style:{...F,minHeight:60},disabled:!eB})]}),eS&&(0,i.jsx)("p",{style:{color:"var(--danger)",fontSize:13},children:eS}),(0,i.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,i.jsx)("button",{type:"submit",style:T,disabled:!eB,children:"Save Extension"})})]})]}),(0,i.jsxs)("section",{style:D,children:[(0,i.jsx)("h3",{style:C,children:"Status Actions"}),(0,i.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[(0,i.jsx)("button",{type:"button",style:E,onClick:()=>ez("Live"),children:"Mark Live"}),(0,i.jsx)("button",{type:"button",style:E,onClick:()=>ez("Invalidated"),children:"Flag Invalidated"}),(0,i.jsx)("button",{type:"button",style:E,onClick:()=>ez("Determined"),children:"Record Decision"})]}),eb&&(0,i.jsx)("p",{style:{color:"var(--text-muted)",fontSize:13},children:eb})]}),(0,i.jsxs)("section",{style:D,children:[(0,i.jsx)("h3",{style:C,children:"Issues"}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[0===ex.issues.length&&(0,i.jsx)("p",{style:{color:"var(--text-muted)"},children:"No issues logged"}),ex.issues.map(e=>{var t;return(0,i.jsxs)("div",{style:q(e.status),children:[(0,i.jsxs)("header",{style:z,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:e.title}),(0,i.jsx)("div",{style:{fontSize:12,color:"var(--text-muted)"},children:e.category})]}),"Resolved"!==e.status&&"Closed"!==e.status&&(0,i.jsx)("button",{type:"button",style:A,onClick:()=>eq(e.issueId),children:"Resolve"})]}),(0,i.jsx)("p",{style:{margin:"6px 0 8px"},children:e.description}),(0,i.jsxs)("dl",{style:W,children:[(0,i.jsx)("dt",{children:"Status"}),(0,i.jsx)("dd",{children:e.status}),(0,i.jsx)("dt",{children:"Due"}),(0,i.jsx)("dd",{children:v(e.dueDate)}),(0,i.jsx)("dt",{children:"Assigned To"}),(0,i.jsx)("dd",{children:null!==(t=e.assignedTo)&&void 0!==t?t:"—"}),(0,i.jsx)("dt",{children:"Raised"}),(0,i.jsx)("dd",{children:v(e.dateRaised)}),e.resolutionNotes&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("dt",{children:"Resolution"}),(0,i.jsx)("dd",{children:e.resolutionNotes})]})]})]},e.issueId)})]}),(0,i.jsxs)("form",{onSubmit:eN,style:U,children:[(0,i.jsx)("h4",{style:{margin:0},children:"Add Issue"}),(0,i.jsxs)("label",{style:M,children:["Title",(0,i.jsx)("input",{required:!0,value:eg.title,onChange:eV("title"),style:F})]}),(0,i.jsxs)("label",{style:M,children:["Category",(0,i.jsx)("select",{value:eg.category,onChange:eV("category"),style:F,children:p.map(e=>(0,i.jsx)("option",{children:e},e))})]}),(0,i.jsxs)("label",{style:M,children:["Description",(0,i.jsx)("textarea",{required:!0,value:eg.description,onChange:eV("description"),style:{...F,minHeight:80}})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:10},children:[(0,i.jsxs)("label",{style:M,children:["Raised By",(0,i.jsx)("input",{value:eg.raisedBy,onChange:eV("raisedBy"),style:F})]}),(0,i.jsxs)("label",{style:M,children:["Assigned To",(0,i.jsx)("input",{value:eg.assignedTo,onChange:eV("assignedTo"),style:F})]}),(0,i.jsxs)("label",{style:M,children:["Date Raised",(0,i.jsx)("input",{type:"date",value:eg.dateRaised,onChange:eV("dateRaised"),style:F})]}),(0,i.jsxs)("label",{style:M,children:["Due Date",(0,i.jsx)("input",{type:"date",value:eg.dueDate,onChange:eV("dueDate"),style:F})]})]}),em&&(0,i.jsx)("p",{style:{color:"var(--danger)",fontSize:13},children:em}),(0,i.jsx)("button",{type:"submit",style:T,children:"Add Issue"})]})]}),(0,i.jsxs)("section",{style:D,children:[(0,i.jsx)("h3",{style:C,children:"Timeline"}),0===eH.length&&(0,i.jsx)("p",{style:{color:"var(--text-muted)"},children:"No timeline events recorded."}),eH.length>0&&(0,i.jsxs)("div",{style:H,children:[(0,i.jsx)("div",{style:_,children:eH.map(e=>(0,i.jsxs)("div",{style:{...B,background:g(e.stage),flexGrow:e.duration,flexBasis:"".concat(e.widthPercent,"%")},children:[(0,i.jsx)("span",{style:V,children:e.event}),(0,i.jsxs)("span",{style:J,children:[(0,r.WU)(e.startDate,"dd MMM yyyy")," → ",(0,r.WU)(e.endDate,"dd MMM yyyy")]}),e.details&&(0,i.jsx)("span",{style:Y,children:e.details})]},e.eventId))}),(0,i.jsx)("div",{style:G,children:eH.map(e=>(0,i.jsxs)("div",{style:Z,children:[(0,i.jsx)("span",{style:{...K,background:g(e.stage)}}),(0,i.jsx)("span",{children:e.stage})]},"".concat(e.eventId,"-legend")))})]})]})]});function eV(e){return t=>{ev(n=>({...n,[e]:t.target.value}))}}}function g(e){switch(e){case"Submitted":return"#6366f1";case"Invalidated":return"#f97316";case"Live":return"#22c55e";case"Determined":return"#0ea5e9";default:return"#6b7280"}}function v(e){if(!e)return"—";try{return new Date(e).toLocaleDateString()}catch(t){return e}}let m={display:"flex",flexDirection:"column",gap:24,minWidth:0,width:"100%"},j={display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:24},b=e=>({display:"inline-block",background:e,color:"#fff",borderRadius:999,padding:"4px 12px",fontSize:12,fontWeight:600,marginTop:6}),D={border:"1px solid var(--border)",borderRadius:16,padding:20,background:"var(--surface)",display:"flex",flexDirection:"column",gap:16},C={margin:0,fontSize:16},w={display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},S={display:"flex",gap:8},R={display:"flex",flexDirection:"column",gap:16},P={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:12},k={display:"flex",justifyContent:"flex-end",gap:12},O={color:"var(--text-muted)",fontSize:13,textTransform:"uppercase",letterSpacing:.6},I={display:"grid",gridTemplateColumns:"max-content 1fr",gap:"4px 16px",fontSize:13},E={background:"var(--primary)",color:"#fff",border:"none",borderRadius:8,padding:"8px 12px",cursor:"pointer",fontWeight:600},T={background:"var(--primary-dark)",color:"#fff",border:"none",borderRadius:8,padding:"10px 14px",cursor:"pointer",fontWeight:600},N={background:"transparent",color:"var(--text-muted)",border:"1px solid var(--border)",borderRadius:8,padding:"8px 14px",cursor:"pointer"},q=e=>({border:"1px solid var(--border)",borderRadius:12,padding:14,background:"Resolved"===e?"rgba(34, 197, 94, 0.08)":"In Progress"===e?"rgba(37, 99, 235, 0.08)":"rgba(248, 250, 252, 0.9)"}),z={display:"flex",justifyContent:"space-between"},A={background:"var(--success)",color:"#fff",border:"none",borderRadius:6,padding:"6px 10px",cursor:"pointer"},W={display:"grid",gridTemplateColumns:"max-content 1fr",gap:"4px 12px",fontSize:12,color:"var(--text-muted)"},U={border:"1px solid var(--border)",borderRadius:12,padding:14,marginTop:12,display:"flex",flexDirection:"column",gap:10,background:"var(--surface)"},L={border:"1px solid var(--border)",borderRadius:12,padding:14,marginTop:16,display:"flex",flexDirection:"column",gap:12,background:"var(--surface)"},M={display:"flex",flexDirection:"column",gap:6,fontSize:13,color:"var(--text-muted)"},F={padding:"8px 10px",borderRadius:8,border:"1px solid var(--border)",fontSize:14},H={display:"flex",flexDirection:"column",gap:16},_={display:"flex",gap:12,alignItems:"stretch",minHeight:120},B={borderRadius:16,color:"#fff",padding:16,display:"flex",flexDirection:"column",gap:8,minWidth:140,boxShadow:"0 10px 24px rgba(15, 23, 42, 0.15)"},V={fontWeight:700,fontSize:14},J={fontSize:12,opacity:.9},Y={fontSize:12,lineHeight:1.4,opacity:.9},G={display:"flex",flexWrap:"wrap",gap:12},Z={display:"flex",alignItems:"center",gap:6,fontSize:12,color:"var(--text-muted)"},K={width:10,height:10,borderRadius:"50%"},Q={border:"1px solid var(--border)",borderRadius:12,padding:14,background:"rgba(248, 250, 252, 0.9)",display:"flex",flexDirection:"column",gap:6};var X=n(87138);function $(e){let{params:t}=e,n=(0,l.useRouter)(),a=t.id;return(0,i.jsxs)("div",{style:{maxWidth:960,margin:"0 auto",padding:"32px 24px 64px",display:"flex",flexDirection:"column",gap:24},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:16},children:[(0,i.jsx)("button",{type:"button",onClick:()=>n.back(),style:{background:"transparent",border:"1px solid var(--border)",borderRadius:999,padding:"8px 16px",fontWeight:600,cursor:"pointer"},children:"← Back"}),(0,i.jsx)(X.default,{href:"/issues",style:{fontSize:13,color:"var(--primary)",fontWeight:600},children:"View all issues"})]}),(0,i.jsx)(y,{applicationId:a,onClose:()=>n.back()})]})}},421:function(e,t,n){"use strict";n.d(t,{Z:function(){return u},q:function(){return c}});var i=n(4896);let l="eu-west-2",a="eu-west-2_Mp5QuBMEE",s="7p4cb8l4k8g9s2e9infoqoc6id",r="eu-west-2:76467ba5-5dcb-45e3-b2e9-91838ab508cd",o="https://hv16oj3j92.execute-api.eu-west-2.amazonaws.com/prod",d=!!(l&&a&&s&&r&&o);d&&i.V.configure({Auth:{Cognito:{userPoolId:a,userPoolClientId:s,identityPoolId:r,loginWith:{username:!1,email:!0,phone:!1}}},API:{REST:{PlanningTrackerApi:{endpoint:o,region:l}}}});let c=d,u=!1},92800:function(e,t,n){"use strict";n.d(t,{L8:function(){return r},UM:function(){return d},VG:function(){return u},W3:function(){return o},_7:function(){return x},ko:function(){return f},li:function(){return p},v:function(){return c}});var i=n(13280),l=n(421);async function a(){if(l.Z||!l.q)return{};try{var e,t;let n=await (0,i.y)(),l=null===(t=n.tokens)||void 0===t?void 0:null===(e=t.idToken)||void 0===e?void 0:e.toString();if(l)return{Authorization:"Bearer ".concat(l)}}catch(e){console.warn("Failed to fetch auth session",e)}return{}}async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Headers(t.headers);n.set("Content-Type","application/json"),Object.entries(await a()).forEach(e=>{let[t,i]=e;return n.set(t,i)});let i=await fetch("".concat("https://hv16oj3j92.execute-api.eu-west-2.amazonaws.com/prod").concat(e),{...t,headers:n});if(!i.ok)throw Error(await i.text()||"API request failed");if(204!==i.status)return i.json()}async function r(e){return s("/applications?status=".concat(encodeURIComponent(e)))}async function o(e){return s("/applications",{method:"POST",body:JSON.stringify(e)})}async function d(e){return s("/applications/".concat(e))}async function c(e,t){return s("/applications/".concat(e,"/issues"),{method:"POST",body:JSON.stringify(t)})}async function u(e,t,n){return s("/applications/".concat(e,"/issues/").concat(t),{method:"PATCH",body:JSON.stringify(n)})}async function p(e,t){return s("/applications/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async function x(e){let t=e?"?status=".concat(encodeURIComponent(e)):"";return s("/issues".concat(t))}async function f(e,t){return s("/applications/".concat(e,"/extensions"),{method:"POST",body:JSON.stringify(t)})}}},function(e){e.O(0,[844,722,138,89,971,23,744],function(){return e(e.s=79594)}),_N_E=e.O()}]);